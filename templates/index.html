<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Загрузка Мафии…</title>
</head>
<body>
  <div id="loading">⏳ Загрузка...</div>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    Telegram.WebApp.ready();
    const initData = Telegram.WebApp.initData;

    if (!initData) {
      document.body.innerHTML = "<h3>❌ Не удалось получить Telegram данные. Запустите через Telegram.</h3>";
    } else {
      fetch(`/webapp?tgWebAppData=${encodeURIComponent(initData)}`)
        .then(res => res.text())
        .then(html => {
          document.open();
          document.write(html);
          document.close();
        })
        .catch(err => {
          document.body.innerHTML = "<h3>❌ Ошибка при загрузке таблицы.</h3>";
        });
    }
  </script>
</body>
</html>